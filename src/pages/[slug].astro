---
import Hero from "../components/Hero.astro";
import Layout from "../layouts/Layout.astro";
import Testimonials from '../components/Testimonials.astro';
import Services from "../components/Services.astro";
import FAQ from '../components/FAQ.astro';
import Navbar from '../components/Navbar.astro';
import Contact from '../components/Contact.astro';
import WhatsappButton from '../components/WhatsappButton.astro';
import Footer from '../components/Footer.astro';
import LocationInfo from '../components/LocationInfo.astro';
import { getCollection } from "astro:content";

export const prerender = true;

export async function getStaticPaths() {
    const locations = await getCollection("locations");

    return locations.map((location) => ({
        params: { slug: location.slug },
        props: { location}
    }));
}

const  {location} = Astro.props;
const {data} = location;
const { title, seoTitle, seoDescription, seoKeywords, h1, intro, span, zoneDescription} = data;

const canonical = `https://kiafadestapaciones.com.ar/${location.slug}`;

const keywords = seoKeywords || `destapaciones ${title.toLowerCase()}, destapador ${title.toLowerCase()}, destapaciones caba, destapaciones 24 horas, kiafa destapaciones`;
---

<Layout title={seoTitle} description={seoDescription} keywords={keywords} canonical={canonical}>
	<Navbar />
    <main id="main-content">
        <Hero title={h1} subtitle={intro} span={span} />
        <Testimonials />
        <LocationInfo title={title} zoneDescription={zoneDescription} />
        <Services />
        <FAQ />
        <Contact />
    </main>
    <WhatsappButton />
    <Footer />
</Layout>


